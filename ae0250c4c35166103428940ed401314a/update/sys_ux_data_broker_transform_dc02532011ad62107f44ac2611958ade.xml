<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ux_data_broker_transform">
    <sys_ux_data_broker_transform action="INSERT_OR_UPDATE">
        <acl_failure_result/>
        <api_name>x_snc_animal_she_0.stepperGetAnimalStatus AK</api_name>
        <batch_exclude>false</batch_exclude>
        <description>Get Animal info for stepper</description>
        <mutates_server_data>false</mutates_server_data>
        <name>stepperGetAnimalStatus AK</name>
        <output_schema/>
        <private>false</private>
        <props>[&#13;
  {&#13;
    "name": "table",&#13;
    "label": "Table",&#13;
    "description": "Table name of the record.",&#13;
    "readOnly": false,&#13;
    "fieldType": "string",&#13;
    "mandatory": true,&#13;
    "defaultValue": ""&#13;
  },&#13;
  {&#13;
    "name": "sys_id",&#13;
    "label": "Sys Id",&#13;
    "description": "Sys Id of the record.",&#13;
    "readOnly": false,&#13;
    "fieldType": "string",&#13;
    "mandatory": true,&#13;
    "defaultValue": ""&#13;
  }&#13;
]&#13;
&#13;
</props>
        <required_translations>[ {
  "message" : "Sys Id",
  "comment" : ""
}, {
  "message" : "Sys Id of the record.",
  "comment" : ""
}, {
  "message" : "Table",
  "comment" : ""
}, {
  "message" : "Table name of the record.",
  "comment" : ""
} ]</required_translations>
        <schema_version>1.0.0</schema_version>
        <script><![CDATA[function transform(input) {
    var result = [];
    var table = input.table;
    var sys_id = input.sys_id;
    var taskGr = new GlideRecord(table);

    /* validate the record and the existence of the ‘status’ field */
    if (taskGr.get(sys_id) && taskGr.isValidRecord() && taskGr.isValidField('status')) {
        /* Use OOB API GlideChoiceList to get all choices for Status field */
        var choices = new GlideChoiceList();
        var choiceList = choices.getChoiceList(table, 'status');

        /* get the current state value of the record */
        var selectedChoice = taskGr.getValue('status');
        
        /* loop through returned choices to build desired array as output */
        for (var i = 0; i < choiceList.getSize(); i++) {
            var choice = {};
            choice['id'] = choiceList.getChoice(i).getValue() + '_';
            choice['label'] = choiceList.getChoice(i).getLabel();
            if (choiceList.getChoice(i).getValue() == selectedChoice) {
                choice['progress'] = 'none';
                selectedChoice = null;
            } else {
                if (selectedChoice) {
                    choice['progress'] = 'done';
                } else {
                    choice['progress'] = 'partial';
                }
            }
            result.push(choice);
        }
    }
    /* returning an array of items fit for the stepper component */
    return result;
}

]]></script>
        <sys_class_name>sys_ux_data_broker_transform</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2025-05-13 15:00:26</sys_created_on>
        <sys_id>dc02532011ad62107f44ac2611958ade</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_name>stepperGetAnimalStatus AK</sys_name>
        <sys_package display_value="Animal Shelter Experience" source="x_snc_animal_she_0">ae0250c4c35166103428940ed401314a</sys_package>
        <sys_policy/>
        <sys_scope display_value="Animal Shelter Experience">ae0250c4c35166103428940ed401314a</sys_scope>
        <sys_update_name>sys_ux_data_broker_transform_dc02532011ad62107f44ac2611958ade</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2025-05-13 18:46:39</sys_updated_on>
    </sys_ux_data_broker_transform>
    <sys_translated_text action="delete_multiple" query="documentkey=dc02532011ad62107f44ac2611958ade"/>
</record_update>
